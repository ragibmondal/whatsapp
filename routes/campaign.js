const _0xcb3a4d = _0x318b; function _0x4301() { const _0x3f369a = ['msg', '\x27\x20WHERE\x20uid\x20=\x20\x27', 'authenticated', 'SELECT\x20*\x20FROM\x20campaign\x20WHERE\x20unique_id\x20=\x20\x27', 'excel_array', 'then', 'toString', './campaign/paste/pastemsg', 'user\x20left\x20messages\x20updated', '--disable-dev-shm-usage', 'initialize', 'post', '../config/config', '\x27,\x20\x27Started\x27,\x20\x27', 'Mobile\x20number\x20is\x20not\x20registered', 'var_two', '--single-process', 'uid', 'addType', '4856ZkCqfb', 'decode', '11GBIkWq', 'substring', '--disable-setuid-sandbox', 'UPDATE\x20user\x20SET\x20qr_bulk\x20=\x20NULL\x20WHERE\x20uid\x20=\x20\x27', 'UPDATE\x20user\x20SET\x20login_status=\x27Login\x20success\x27\x20WHERE\x20uid\x20=\x20\x27', 'exports', 'mobile_number_with_country_code', 'paste', '/get_one', '7175EOFzzy', 'json', 'log', '90108XgkpDr', 'DB\x20query\x20error', '--no-first-run', '30tieZDe', 'auth\x20is\x20done\x20', 'yes', 'UPDATE\x20user\x20SET\x20qr_bulk=\x27', '580XLRlXf', 'slice', 'user_data', 'fromUrl', '231XMSKaA', 'Server\x20error!\x20Please\x20check\x20error\x20in\x20console', 'QR\x20RECEIVED', '2097xnaLjU', '/get_qr', '--disable-extensions', 'media_url', 'Login\x20success', 'bcrypt', 'sent', 'browser\x20closed', '{var_one}', 'moment', 'body', 'var_one', 'UPDATE\x20user\x20SET\x20left_msg\x20=\x20\x27', '--no-zygote', '--disable-accelerated-2d-canvas', 'get', '6732672SGbWRh', '\x27,\x20\x27', 'replace', 'UPDATE\x20user\x20SET\x20login_status=\x27Logout\x27\x20WHERE\x20uid\x20=\x20\x27', 'sending_msg', '/send_whstapp', 'Server\x20error', '{var_two}', 'unix', 'query', 'length', 'SELECT\x20*\x20FROM\x20user\x20WHERE\x20uid\x20=\x20\x27', '/send_whstapp_paste', 'unique_id', './campaign/excel/dbcreate', 'mainFun', 'Db\x20query\x20error', 'express', 'ready', 'catch', '\x27\x20WHERE\x20unique_id\x20=\x20\x27', '131050mZgweY', 'left_msg', '--no-sandbox', '4279690HLyoSH', '--disable-gpu', 'delay_in_sec', '70386QSrRnF', 'destroy', '/check_auth', 'logout']; _0x4301 = function () { return _0x3f369a; }; return _0x4301(); } (function (_0x181aa2, _0x4ccefd) { const _0x2a9d18 = _0x318b, _0x49e840 = _0x181aa2(); while (!![]) { try { const _0x123884 = -parseInt(_0x2a9d18(0x17b)) / 0x1 + parseInt(_0x2a9d18(0x1a6)) / 0x2 * (-parseInt(_0x2a9d18(0x1a9)) / 0x3) + parseInt(_0x2a9d18(0x1ad)) / 0x4 * (parseInt(_0x2a9d18(0x1a3)) / 0x5) + -parseInt(_0x2a9d18(0x181)) / 0x6 * (-parseInt(_0x2a9d18(0x153)) / 0x7) + -parseInt(_0x2a9d18(0x198)) / 0x8 * (-parseInt(_0x2a9d18(0x156)) / 0x9) + parseInt(_0x2a9d18(0x17e)) / 0xa * (-parseInt(_0x2a9d18(0x19a)) / 0xb) + parseInt(_0x2a9d18(0x166)) / 0xc; if (_0x123884 === _0x4ccefd) break; else _0x49e840['push'](_0x49e840['shift']()); } catch (_0x248564) { _0x49e840['push'](_0x49e840['shift']()); } } }(_0x4301, 0x4657e)); function _0x318b(_0x1e4934, _0x2499a6) { const _0x4301d1 = _0x4301(); return _0x318b = function (_0x318b62, _0x2d741f) { _0x318b62 = _0x318b62 - 0x153; let _0x3bc385 = _0x4301d1[_0x318b62]; return _0x3bc385; }, _0x318b(_0x1e4934, _0x2499a6); } const router = require(_0xcb3a4d(0x177))['Router'](), con = require(_0xcb3a4d(0x191)), bcrypt = require(_0xcb3a4d(0x15b)), { isvalid, isuser, checkmsg } = require('../middlewares/user'), moment = require(_0xcb3a4d(0x15f)), { Client, LocalAuth, MessageMedia } = require('whatsapp-web.js'), dbcreate = require(_0xcb3a4d(0x174)), pastemsg = require(_0xcb3a4d(0x18c)); router[_0xcb3a4d(0x165)]('/gen_qr', isuser, async (_0x20146d, _0x468ed5) => { const _0x4825e4 = _0xcb3a4d; try { const _0x18f9eb = new Client({ 'authStrategy': new LocalAuth({ 'clientId': _0x20146d[_0x4825e4(0x199)][_0x4825e4(0x196)] }), 'puppeteer': { 'headless': ![] } }); _0x18f9eb['on']('qr', _0x410bc7 => { const _0x3b6767 = _0x4825e4; console['log'](_0x3b6767(0x155), _0x410bc7); }), _0x18f9eb['on'](_0x4825e4(0x178), async () => { const _0xa1d09a = _0x4825e4; _0x468ed5[_0xa1d09a(0x1a4)]({ 'success': !![], 'msg': _0xa1d09a(0x15a) }), setTimeout(async () => { const _0x29ca31 = _0xa1d09a; await _0x18f9eb[_0x29ca31(0x182)](), console[_0x29ca31(0x1a5)](_0x29ca31(0x15d)); }, 0xbb8); }), _0x18f9eb['initialize'](); } catch (_0x1ebd16) { console[_0x4825e4(0x1a5)](_0x1ebd16), _0x468ed5[_0x4825e4(0x1a4)]({ 'msg': _0x4825e4(0x154), 'err': _0x1ebd16 }); } }), router['get'](_0xcb3a4d(0x183), isuser, async (_0x50866c, _0x37798e) => { const _0x4ab25b = _0xcb3a4d; try { const _0x18e278 = new Client({ 'authStrategy': new LocalAuth({ 'clientId': _0x50866c[_0x4ab25b(0x199)]['uid'] }), 'puppeteer': { 'headless': ![], 'args': [_0x4ab25b(0x17d), _0x4ab25b(0x19c), '--disable-extensions', '--disable-dev-shm-usage', _0x4ab25b(0x164), _0x4ab25b(0x1a8), '--no-zygote', _0x4ab25b(0x195), _0x4ab25b(0x17f)] } }); _0x18e278['on']('qr', _0x2b4fc2 => { const _0x4d4319 = _0x4ab25b; console[_0x4d4319(0x1a5)](_0x4d4319(0x155), _0x2b4fc2); var _0xf3dc84 = _0x4d4319(0x169) + _0x50866c['decode']['uid'] + '\x27\x20'; con[_0x4d4319(0x16f)](_0xf3dc84, (_0x35cf3f, _0x5138ae) => { const _0x58fb06 = _0x4d4319; if (_0x35cf3f) { _0x37798e[_0x58fb06(0x1a4)]({ 'msg': _0x58fb06(0x176), 'err': _0x35cf3f }), console[_0x58fb06(0x1a5)](_0x35cf3f); return; } else { _0x37798e[_0x58fb06(0x1a4)]({ 'login': ![] }), setTimeout(() => { const _0x25e29c = _0x58fb06; _0x18e278['destroy']()[_0x25e29c(0x18a)](_0x510235 => console[_0x25e29c(0x1a5)](_0x510235))[_0x25e29c(0x179)](_0x7016b5 => { const _0x58478a = _0x25e29c; console[_0x58478a(0x1a5)]({ 'err': _0x7016b5 }); }); }, 0x1388); return; } }); }), _0x18e278['on'](_0x4ab25b(0x178), async () => { const _0x4ce8f4 = _0x4ab25b; _0x37798e[_0x4ce8f4(0x1a4)]({ 'success': !![], 'msg': _0x4ce8f4(0x15a) }), setTimeout(async () => { const _0x32a681 = _0x4ce8f4; await _0x18e278[_0x32a681(0x182)](), console['log']('browser\x20closed'); }, 0xbb8); }), _0x18e278['on'](_0x4ab25b(0x187), async _0x1cb266 => { const _0x2887fb = _0x4ab25b; console[_0x2887fb(0x1a5)](_0x2887fb(0x1aa), _0x50866c[_0x2887fb(0x199)][_0x2887fb(0x196)]); var _0x561699 = _0x2887fb(0x19e) + _0x50866c[_0x2887fb(0x199)][_0x2887fb(0x196)] + '\x27\x20'; con[_0x2887fb(0x16f)](_0x561699, (_0x452fd5, _0x42a975) => { const _0x45d0b5 = _0x2887fb; if (_0x452fd5) { _0x37798e[_0x45d0b5(0x1a4)]({ 'msg': 'Db\x20query\x20error', 'err': _0x452fd5 }), console['log'](_0x452fd5), setTimeout(() => { const _0x55204c = _0x45d0b5; _0x18e278[_0x55204c(0x182)]()[_0x55204c(0x18a)](_0x12b076 => console[_0x55204c(0x1a5)](_0x12b076))[_0x55204c(0x179)](_0x4d85a6 => { const _0x2ffee5 = _0x55204c; console[_0x2ffee5(0x1a5)]({ 'err': _0x4d85a6 }); }); }, 0x1388); return; } else { _0x37798e[_0x45d0b5(0x1a4)]({ 'login': !![], 'msg': _0x45d0b5(0x15a) }), setTimeout(async () => { const _0x1b47aa = _0x45d0b5; await _0x18e278['destroy'](), console['log'](_0x1b47aa(0x15d)); }, 0xbb8); return; } }); }), _0x18e278[_0x4ab25b(0x18f)](); } catch (_0x57c53d) { console[_0x4ab25b(0x1a5)](_0x57c53d), _0x37798e['json']({ 'msg': _0x4ab25b(0x154), 'err': _0x57c53d }); } }), router[_0xcb3a4d(0x165)](_0xcb3a4d(0x157), isuser, (_0x4343cb, _0x22d683) => { const _0x4acdb0 = _0xcb3a4d; var _0x5e5e31 = _0x4acdb0(0x171) + _0x4343cb[_0x4acdb0(0x199)][_0x4acdb0(0x196)] + '\x27\x20'; con['query'](_0x5e5e31, (_0x27c2ec, _0x5d6d83) => { const _0x5bb429 = _0x4acdb0; if (_0x27c2ec) { _0x22d683[_0x5bb429(0x1a4)]({ 'msg': _0x5bb429(0x176), 'err': _0x27c2ec }), console[_0x5bb429(0x1a5)](_0x27c2ec); return; } else _0x22d683[_0x5bb429(0x1a4)]({ 'data': _0x5d6d83[0x0], 'success': !![] }); }); }), router[_0xcb3a4d(0x190)]('/send_bulk', isuser, checkmsg, (_0x278e16, _0x1a57ce) => { const _0x1a3ab2 = _0xcb3a4d, _0x243140 = moment()[_0x1a3ab2(0x16e)](), _0x13b2ae = _0x278e16[_0x1a3ab2(0x160)]; try { const _0x3f9ba9 = new Client({ 'puppeteer': { 'headless': ![], 'args': [_0x1a3ab2(0x17d), '--disable-setuid-sandbox', _0x1a3ab2(0x158), _0x1a3ab2(0x18e), _0x1a3ab2(0x164), '--no-first-run', _0x1a3ab2(0x163), _0x1a3ab2(0x195), _0x1a3ab2(0x17f)] } }); _0x3f9ba9['on']('qr', _0xffb662 => { const _0xa20034 = _0x1a3ab2; console['log'](_0xa20034(0x155), _0xffb662); var _0x10a968 = _0xa20034(0x1ac) + _0xffb662 + '\x27\x20WHERE\x20uid\x20=\x20\x27' + _0x278e16['decode'][_0xa20034(0x196)] + '\x27'; con[_0xa20034(0x16f)](_0x10a968, (_0x2e1c23, _0x24cad5) => { const _0x13d155 = _0xa20034; if (_0x2e1c23) { _0x1a57ce[_0x13d155(0x1a4)]({ 'msg': 'Db\x20query\x20error', 'err': _0x2e1c23 }); return; } else _0x1a57ce[_0x13d155(0x1a4)]({ 'msg': 'QR\x20Generated', 'success': !![], 'qr': _0xffb662 }); }); }), _0x3f9ba9['on']('auth_failure', () => { setTimeout(() => { _0x3f9ba9['destroy'](); }, 0x7d0); }); async function _0x1a10f1(_0x76280d, _0x1b03c8, _0x4725d7, _0x5a367e) { return new Promise(async (_0x4f467b, _0x29f40d) => { const _0x67565e = _0x318b, _0x55969e = _0x1b03c8, _0x19811f = _0x55969e[_0x67565e(0x18b)]()['replace'](/[- )(]/g, ''), _0x3791fb = '' + _0x76280d + _0x19811f[_0x67565e(0x19b)](_0x19811f[_0x67565e(0x170)] - 0xa), _0x4a7690 = await _0x3f9ba9['getNumberId'](_0x3791fb); if (_0x4a7690) { console[_0x67565e(0x1a5)]({ 'code': _0x76280d, 'num': _0x1b03c8, 'msg': _0x4725d7, 'media': _0x5a367e }), _0x4f467b({ 'msg': 'yes' }); return; } else console[_0x67565e(0x1a5)](_0x3791fb, _0x67565e(0x193)), _0x4f467b({ 'msg': 'no' }); }); } function _0x2b54b0(_0x2e3073) { let _0x559dd2 = 0x0, _0x102724 = 0x0; return new Promise((_0x45e1fd, _0x5cadb7) => { const _0x2b8890 = _0x318b; var _0x5ed817 = setInterval(async () => { const _0x5bbaeb = _0x318b, _0x4b7f29 = await _0x1a10f1(_0x13b2ae[_0x5bbaeb(0x189)][_0x559dd2]['mobile_number_with_country_code'][_0x5bbaeb(0x18b)]()[_0x5bbaeb(0x1ae)](0x0, 0x2), _0x13b2ae['excel_array'][_0x559dd2][_0x5bbaeb(0x1a0)][_0x5bbaeb(0x18b)]()[_0x5bbaeb(0x19b)](0x2), _0x13b2ae[_0x5bbaeb(0x197)] === _0x5bbaeb(0x1a1) ? _0x13b2ae[_0x5bbaeb(0x16a)] : _0x13b2ae['sending_msg'][_0x5bbaeb(0x168)](_0x5bbaeb(0x16d), _0x13b2ae[_0x5bbaeb(0x189)][_0x559dd2][_0x5bbaeb(0x194)])[_0x5bbaeb(0x168)](_0x5bbaeb(0x15e), _0x13b2ae[_0x5bbaeb(0x189)][_0x559dd2][_0x5bbaeb(0x161)]), _0x2e3073); _0x559dd2 += 0x1, _0x4b7f29[_0x5bbaeb(0x185)] === _0x5bbaeb(0x1ab) && (_0x102724 += 0x1), _0x13b2ae[_0x5bbaeb(0x189)][_0x5bbaeb(0x170)] === _0x559dd2 && (clearInterval(_0x5ed817), _0x45e1fd({ 'sent': _0x102724 })); }, _0x13b2ae[_0x2b8890(0x180)] * 0x3e8); }); } _0x3f9ba9['on'](_0x1a3ab2(0x178), async () => { const _0x36c4fb = _0x1a3ab2; var _0x4bda44 = 'INSERT\x20into\x20campaign\x20(unique_id,\x20uid,\x20status,\x20total_msg)\x20VALUES\x20(\x27' + _0x243140 + _0x36c4fb(0x167) + _0x278e16[_0x36c4fb(0x199)]['uid'] + _0x36c4fb(0x192) + _0x278e16[_0x36c4fb(0x160)]['excel_array']['length'] + '\x27)', _0x191b68 = _0x36c4fb(0x19d) + _0x278e16[_0x36c4fb(0x199)][_0x36c4fb(0x196)] + '\x27'; con[_0x36c4fb(0x16f)](_0x4bda44, async (_0x49a6cc, _0x3f3925) => { const _0x3c227a = _0x36c4fb; if (_0x49a6cc) { console['log'](_0x49a6cc); return; } else con[_0x3c227a(0x16f)](_0x191b68, async (_0x418b4e, _0x2fb3c1) => { const _0x133b18 = _0x3c227a; if (_0x418b4e) { console['log'](_0x418b4e); return; } else { let _0x36f466 = ![]; _0x13b2ae[_0x133b18(0x159)] ? _0x36f466 = await MessageMedia[_0x133b18(0x1b0)](_0x13b2ae[_0x133b18(0x159)]) : _0x36f466 = ![]; const _0x53707e = await _0x2b54b0(_0x36f466); var _0x2fa764 = _0x278e16[_0x133b18(0x1af)][_0x133b18(0x17c)] - _0x53707e['sent']; con[_0x133b18(0x16f)]('UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27Completed\x27,\x20sent_msg\x20=\x20\x27' + _0x53707e[_0x133b18(0x15c)] + _0x133b18(0x17a) + _0x243140 + '\x27\x20', async (_0x1b7a43, _0x59a8a4) => { const _0x618748 = _0x133b18; if (_0x1b7a43) { console[_0x618748(0x1a5)](_0x1b7a43); return; } else setTimeout(async () => { const _0x29ae7b = _0x618748; await _0x3f9ba9[_0x29ae7b(0x184)](); }, 0x2710), con['query'](_0x618748(0x162) + _0x2fa764 + _0x618748(0x186) + _0x278e16[_0x618748(0x199)][_0x618748(0x196)] + '\x27\x20', (_0x55823c, _0x20c548) => { const _0x1075a8 = _0x618748; if (_0x1b7a43) { console[_0x1075a8(0x1a5)](_0x1b7a43); return; } else console[_0x1075a8(0x1a5)](_0x1075a8(0x18d)); }); }); } }); }); }), _0x3f9ba9['initialize'](); } catch (_0x392550) { _0x1a57ce[_0x1a3ab2(0x1a4)]({ 'err': _0x392550, 'msg': _0x1a3ab2(0x16c) }), console['log'](_0x392550); } }), router['post'](_0xcb3a4d(0x16b), isuser, checkmsg, async (_0xbb56ec, _0x2a6b84) => { const _0x49e568 = _0xcb3a4d, _0x292455 = moment()[_0x49e568(0x16e)](), _0x5b812a = _0xbb56ec['body']; await dbcreate[_0x49e568(0x175)]({ 'unique_id': _0x292455, 'body': _0x5b812a, 'req': _0xbb56ec, 'res': _0x2a6b84 }); }), router['post'](_0xcb3a4d(0x172), isuser, checkmsg, async (_0xdd0794, _0x57c07e) => { const _0x5101d6 = _0xcb3a4d, _0x2d0172 = moment()[_0x5101d6(0x16e)](), _0x377d2 = _0xdd0794[_0x5101d6(0x160)]; await pastemsg[_0x5101d6(0x175)]({ 'unique_id': _0x2d0172, 'body': _0x377d2, 'req': _0xdd0794, 'res': _0x57c07e }); }), router[_0xcb3a4d(0x190)](_0xcb3a4d(0x1a2), isuser, (_0x44c44d, _0x36f29d) => { const _0x69a17a = _0xcb3a4d, _0x28ecd8 = _0x69a17a(0x188) + _0x44c44d[_0x69a17a(0x160)][_0x69a17a(0x173)] + '\x27\x20'; con[_0x69a17a(0x16f)](_0x28ecd8, (_0x47bb8b, _0x332a97) => { const _0x581a92 = _0x69a17a; if (_0x47bb8b) { _0x36f29d[_0x581a92(0x1a4)]({ 'msg': _0x581a92(0x1a7) }), console[_0x581a92(0x1a5)](_0x47bb8b); return; } else _0x36f29d[_0x581a92(0x1a4)]({ 'success': !![], 'data': _0x332a97[0x0] }); }); }), module[_0xcb3a4d(0x19f)] = router;