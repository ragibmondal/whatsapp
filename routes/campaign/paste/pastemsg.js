const _0x3c1848 = _0x4820; (function (_0x1e5b66, _0x15ed19) { const _0x2a6f3f = _0x4820, _0x45fa15 = _0x1e5b66(); while (!![]) { try { const _0x2c6813 = parseInt(_0x2a6f3f(0x162)) / 0x1 + parseInt(_0x2a6f3f(0x14c)) / 0x2 + -parseInt(_0x2a6f3f(0x143)) / 0x3 * (-parseInt(_0x2a6f3f(0x160)) / 0x4) + parseInt(_0x2a6f3f(0x16c)) / 0x5 + -parseInt(_0x2a6f3f(0x170)) / 0x6 * (parseInt(_0x2a6f3f(0x172)) / 0x7) + parseInt(_0x2a6f3f(0x155)) / 0x8 + parseInt(_0x2a6f3f(0x14e)) / 0x9 * (-parseInt(_0x2a6f3f(0x142)) / 0xa); if (_0x2c6813 === _0x15ed19) break; else _0x45fa15['push'](_0x45fa15['shift']()); } catch (_0x161496) { _0x45fa15['push'](_0x45fa15['shift']()); } } }(_0x8cee, 0x22b81)); const con = require('../../../config/config'), { Client, LocalAuth, MessageMedia } = require(_0x3c1848(0x165)), moment = require('moment'); function _0x4820(_0x3cf008, _0x525e0b) { const _0x8ceeaf = _0x8cee(); return _0x4820 = function (_0x4820ed, _0x2780ac) { _0x4820ed = _0x4820ed - 0x13e; let _0x5c8eec = _0x8ceeaf[_0x4820ed]; return _0x5c8eec; }, _0x4820(_0x3cf008, _0x525e0b); } function mainFun({ unique_id: _0x53d4c1, body: _0x506c6d, req: _0x23354d, res: _0x158c1c }) { return new Promise(async (_0x510505, _0x8eb710) => { const _0x1187df = _0x4820; try { const _0x48ebc1 = await _0x38b06c(), _0x1af9f1 = new Client({ 'puppeteer': { 'headless': !![], 'args': [_0x1187df(0x14d), _0x1187df(0x163), '--disable-extensions', _0x1187df(0x164), _0x1187df(0x140), _0x1187df(0x154), _0x1187df(0x166), _0x1187df(0x13e), _0x1187df(0x145)] } }); _0x1af9f1['on']('qr', async _0xe3a716 => { const _0x290336 = _0x1187df, _0x8c599c = 'UPDATE\x20campaign\x20SET\x20qr_code\x20=\x20\x27' + _0xe3a716 + '\x27\x20WHERE\x20unique_id\x20=\x20\x27' + _0x53d4c1 + '\x27'; con['query'](_0x8c599c, (_0x5aae78, _0x42e031) => { const _0xfcbb4b = _0x4820; if (_0x5aae78) return { 'err': _0x5aae78, 'msg': _0xfcbb4b(0x147) }; else { console[_0xfcbb4b(0x174)](_0xfcbb4b(0x15f)); return; } }), _0x158c1c[_0x290336(0x176)]({ 'msg': _0x290336(0x15a), 'success': !![], 'qr': _0xe3a716, 'unique_id': _0x53d4c1 }); }), _0x1af9f1['on'](_0x1187df(0x152), () => { setTimeout(() => { const _0x574d18 = _0x4820; _0x1af9f1[_0x574d18(0x141)](); }, 0x7d0); }); function _0x38b06c() { return new Promise(async (_0x101d47, _0x114159) => { const _0x2dd9bf = _0x4820; var _0x293693 = _0x2dd9bf(0x14a) + _0x53d4c1 + '\x27,\x20\x27' + _0x23354d[_0x2dd9bf(0x15c)][_0x2dd9bf(0x169)] + _0x2dd9bf(0x16f) + _0x23354d[_0x2dd9bf(0x16d)]['pasted_string'][_0x2dd9bf(0x14b)](',')['length'] + '\x27\x20)'; con[_0x2dd9bf(0x14f)](_0x293693, (_0x4dc239, _0xaa8261) => { const _0x185062 = _0x2dd9bf; if (_0x4dc239) return { 'err': _0x4dc239, 'msg': _0x185062(0x147) }; else { _0x101d47({ 'msg': _0x185062(0x13f) }); return; } }); }); } function _0x3a2ba6(_0x43d5a5, _0x16d8ea, _0x35b1a6, _0x2fda7a) { return new Promise(async (_0x5b73c3, _0x43e310) => { const _0x2561af = _0x4820, _0x12fa2e = _0x16d8ea, _0x4fa4cf = _0x12fa2e[_0x2561af(0x16b)]()[_0x2561af(0x175)](/[- )(]/g, ''), _0x83ae1b = '' + _0x43d5a5 + _0x4fa4cf[_0x2561af(0x148)](_0x4fa4cf['length'] - 0xa), _0x1aa986 = await _0x1af9f1[_0x2561af(0x149)](_0x83ae1b); if (_0x1aa986) { if (_0x2fda7a) { const _0x39c22e = await _0x1af9f1[_0x2561af(0x159)](_0x1aa986[_0x2561af(0x151)], _0x2fda7a, { 'caption': _0x35b1a6 }); console[_0x2561af(0x174)](_0x2561af(0x15b)); } else { const _0x368712 = await _0x1af9f1[_0x2561af(0x159)](_0x1aa986[_0x2561af(0x151)], _0x35b1a6); console[_0x2561af(0x174)](_0x2561af(0x156)); } _0x5b73c3({ 'msg': _0x2561af(0x167) }); return; } else console[_0x2561af(0x174)](_0x83ae1b, _0x2561af(0x168)), _0x5b73c3({ 'msg': 'no' }); }); } function _0x138b4a({ media: _0x1b88b7 }) { console['log']({ 'body': _0x506c6d, 'mapping': !![] }); let _0x42b538 = 0x0, _0x362a76 = 0x0; return new Promise((_0x223965, _0x464d93) => { var _0x526275 = setInterval(async () => { const _0x350892 = _0x4820, _0xebd78c = await _0x3a2ba6(_0x506c6d[_0x350892(0x16a)][_0x350892(0x14b)](',')[_0x42b538][_0x350892(0x16b)]()['slice'](0x0, 0x2), _0x506c6d[_0x350892(0x16a)][_0x350892(0x14b)](',')[_0x42b538][_0x350892(0x16b)]()['substring'](0x2), _0x506c6d[_0x350892(0x177)], _0x1b88b7, _0x1af9f1); _0x42b538 += 0x1, _0xebd78c['msg'] === _0x350892(0x167) && (_0x362a76 += 0x1), _0x506c6d['pasted_string'][_0x350892(0x14b)](',')[_0x350892(0x146)] === _0x42b538 && (clearInterval(_0x526275), _0x223965({ 'sent': _0x362a76 })); }, parseInt(_0x506c6d['delay_in_sec']) * 0x3e8); }); } function _0x5ea83b({ left_msg: _0x5a44b0, resp: _0xd80a9f }) { return new Promise((_0x51f5af, _0x50a750) => { const _0x119f01 = _0x4820; var _0x300e0a = 'UPDATE\x20campaign\x20SET\x20status\x20=\x20\x27Completed\x27,\x20sent_msg\x20=\x20\x27' + _0xd80a9f[_0x119f01(0x161)] + '\x27\x20WHERE\x20unique_id\x20=\x20\x27' + _0x53d4c1 + '\x27\x20'; con[_0x119f01(0x14f)](_0x300e0a, async (_0x1cb372, _0xca4eea) => { const _0x44263a = _0x119f01; if (_0x1cb372) { console[_0x44263a(0x174)](_0x1cb372); return; } else setTimeout(async () => { const _0x33fd3c = _0x44263a; await _0x1af9f1[_0x33fd3c(0x157)](); }, 0x2710), con[_0x44263a(0x14f)](_0x44263a(0x153) + _0x5a44b0 + '\x27,\x20qr_bulk\x20=\x20\x27NULL\x27\x20WHERE\x20uid\x20=\x20\x27' + _0x23354d[_0x44263a(0x15c)][_0x44263a(0x169)] + '\x27\x20', (_0x114353, _0x319d3a) => { const _0x3b680a = _0x44263a; if (_0x1cb372) { console[_0x3b680a(0x174)](_0x1cb372); return; } else console[_0x3b680a(0x174)]('user\x20left\x20messages\x20updated'), _0x51f5af(); }); }); }); } _0x1af9f1['on'](_0x1187df(0x158), async () => { const _0x509513 = _0x1187df; con['query']('UPDATE\x20campaign\x20SET\x20login_status\x20=\x20\x271\x27\x20WHERE\x20unique_id\x20=\x20\x27' + _0x53d4c1 + '\x27'); let _0x40ecb3 = ![]; _0x506c6d[_0x509513(0x150)] && _0x506c6d[_0x509513(0x173)] ? _0x40ecb3 = await MessageMedia[_0x509513(0x144)](_0x506c6d[_0x509513(0x150)]) : _0x40ecb3 = ![]; const _0x18ad91 = await _0x138b4a({ 'media': _0x40ecb3, 'body': _0x506c6d }); var _0x208ca2 = _0x23354d[_0x509513(0x15e)]['left_msg'] - _0x18ad91['sent']; await _0x5ea83b({ 'left_msg': _0x208ca2, 'resp': _0x18ad91 }), _0x510505(), console['log'](_0x509513(0x16e)); }), _0x1af9f1[_0x1187df(0x171)](); } catch (_0x30b0cb) { console['log'](_0x30b0cb); } }); } function _0x8cee() { const _0x36cd44 = ['2275264ObSrtm', 'msg\x20sent\x20no\x20media', 'logout', 'ready', 'sendMessage', 'QR\x20Generated', 'msg\x20sent', 'decode', 'mainFun', 'user_data', 'added\x20qr', '8YhDbWy', 'sent', '206717Qkuafl', '--disable-setuid-sandbox', '--disable-dev-shm-usage', 'whatsapp-web.js', '--no-zygote', 'yes', 'Mobile\x20number\x20is\x20not\x20registered', 'uid', 'pasted_string', 'toString', '428735LTHRTV', 'body', 'Task\x20done', '\x27,\x20\x20\x27', '109944iAnpfg', 'initialize', '21VLiwOr', 'with_media', 'log', 'replace', 'json', 'sending_msg', '--single-process', 'database\x20created', '--disable-accelerated-2d-canvas', 'destroy', '520VLOqlm', '184053JLpxkN', 'fromUrl', '--disable-gpu', 'length', 'Db\x20query\x20error', 'substring', 'getNumberId', 'INSERT\x20into\x20campaign\x20(unique_id,\x20uid,\x20total_msg)\x20VALUES\x20(\x27', 'split', '267862jEbWAz', '--no-sandbox', '110133KSwslx', 'query', 'media_url', '_serialized', 'auth_failure', 'UPDATE\x20user\x20SET\x20left_msg\x20=\x20\x27', '--no-first-run']; _0x8cee = function () { return _0x36cd44; }; return _0x8cee(); } exports[_0x3c1848(0x15d)] = mainFun;