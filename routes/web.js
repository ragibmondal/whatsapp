const _0x46c90f = _0x3b4c; function _0x474c() { const _0x51b0a3 = ['DBPASSWORD', 'exchange_rate', 'log', 'You\x20app\x20has\x20been\x20installed\x20you\x20are\x20good\x20to\x20go\x20now!\x20redirecting...', 'length', '16lKlXFR', 'catch', 'DBUSER', 'Router', '22YGstsU', '18GGKVlH', 'theme_color', 'body', 'SHOW\x20TABLES\x20FROM\x20', 'INSERT\x20INTO\x20web\x20(app_name,\x20currency_symbol,\x20exchange_rate)\x20VALUES\x20(\x27', '\x27,\x20smtp_email\x20=\x20\x27', 'then', 'hash', 'paypal_client_secret', 'express', 'rz_key', 'UPDATE\x20web\x20SET\x20rz_is_is_active\x20=\x20\x27', '\x27,\x20rz_key\x20=\x20\x27', 'post', 'files', 'random', 'DBPORT', 'UPDATE\x20web\x20SET\x20app_name\x20=\x20\x27', 'now', 'offline_msg', '\x27,\x20\x0a\x20\x20\x20\x20rz_id\x20=\x20\x27', 'app_name', '/update', '../config/config', '240220BltBtj', 'admin', 'get', '1973706SyWULC', '\x27,\x20smtp_password\x20=\x20\x27', '/../client/public/images/', 'env', 'Db\x20query\x20error\x2001', '\x27,\x0a\x20\x20\x20\x20paypal_client_secret\x20=\x20\x27', 'admin_password', 'Settings\x20has\x20been\x20updated', 'DBHOST', 'randomstring', '\x27)\x20', '6038634kVMZIM', '\x27,\x20currency_symbol\x20=\x20\x27', 'UPDATE\x20web\x20SET\x20smtp_host\x20=\x20\x27', '\x27,\x20\x27', '/get', '\x27,\x20smtp_port\x20=\x20\x27', 'currency_symbol', 'bcrypt', 'error', 'It\x20seems\x20you\x20database\x20connection\x20credentials\x20are\x20invalid.', '5746390ntYOqH', 'smtp_email', '71153nuxFRx', '\x27,\x20offline_is_active\x20=\x20\x27', 'rz_id', '\x27,\x20theme_color\x20=\x20\x27', 'json', '\x27,\x20offline_msg\x20=\x20\x27', '55TrYQYt', 'offline_is_active', 'query', 'It\x20seems\x20this\x20database\x20it\x20not\x20empty.\x20Please\x20choose\x20an\x20empty\x20mysql\x20database', '/update_set', 'DATABASE', 'substring', '\x27,\x20paypal_client_id\x20=\x20\x27', '\x27,\x27', 'exports', '2647503KMVOen', 'DB\x20query\x20error', 'getConnection', 'Db\x20query\x20error', 'smtp_password', 'file', '194620NyxfhE', '\x27,\x20\x0a\x20\x20\x20\x20paypal_is_active\x20=\x20\x27']; _0x474c = function () { return _0x51b0a3; }; return _0x474c(); } (function (_0xf5b98a, _0x213442) { const _0x40d5bb = _0x3b4c, _0x143f65 = _0xf5b98a(); while (!![]) { try { const _0x1aba40 = -parseInt(_0x40d5bb(0x19a)) / 0x1 + -parseInt(_0x40d5bb(0x180)) / 0x2 * (parseInt(_0x40d5bb(0x168)) / 0x3) + parseInt(_0x40d5bb(0x15c)) / 0x4 * (parseInt(_0x40d5bb(0x1a0)) / 0x5) + -parseInt(_0x40d5bb(0x18e)) / 0x6 + parseInt(_0x40d5bb(0x183)) / 0x7 * (parseInt(_0x40d5bb(0x163)) / 0x8) + parseInt(_0x40d5bb(0x1aa)) / 0x9 + -parseInt(_0x40d5bb(0x198)) / 0xa * (-parseInt(_0x40d5bb(0x167)) / 0xb); if (_0x1aba40 === _0x213442) break; else _0x143f65['push'](_0x143f65['shift']()); } catch (_0x38b0c5) { _0x143f65['push'](_0x143f65['shift']()); } } }(_0x474c, 0xb5b7a)); const router = require(_0x46c90f(0x171))[_0x46c90f(0x166)](), con = require(_0x46c90f(0x17f)), bcrypt = require(_0x46c90f(0x195)), { isvalid } = require('../middlewares/user'), mysql = require('mysql'), Importer = require('mysql-import'), randomstring = require(_0x46c90f(0x18c)); function _0x3b4c(_0x540abe, _0x16fdd5) { const _0x474c58 = _0x474c(); return _0x3b4c = function (_0x3b4c87, _0x2264b8) { _0x3b4c87 = _0x3b4c87 - 0x157; let _0x5ad2b5 = _0x474c58[_0x3b4c87]; return _0x5ad2b5; }, _0x3b4c(_0x540abe, _0x16fdd5); } router[_0x46c90f(0x182)](_0x46c90f(0x192), (_0xc9463, _0x353c62) => { const _0x2aeffd = _0x46c90f; var _0x48d50d = 'SELECT\x20*\x20FROM\x20web'; con[_0x2aeffd(0x1a2)](_0x48d50d, (_0x52c132, _0x315058) => { const _0x15f44c = _0x2aeffd; if (_0x52c132) { _0x353c62[_0x15f44c(0x19e)]({ 'msg': _0x15f44c(0x159), 'err': _0x52c132 }), console[_0x15f44c(0x160)](_0x52c132); return; } else _0x353c62[_0x15f44c(0x19e)]({ 'data': _0x315058[0x0] }); }); }), router['post'](_0x46c90f(0x17e), isvalid, (_0x3f9112, _0x55b06a) => { const _0x20bed3 = _0x46c90f; var _0x48a54d = _0x20bed3(0x173) + _0x3f9112[_0x20bed3(0x16a)]['rz_is_is_active'] + _0x20bed3(0x174) + _0x3f9112[_0x20bed3(0x16a)][_0x20bed3(0x172)] + _0x20bed3(0x17c) + _0x3f9112[_0x20bed3(0x16a)][_0x20bed3(0x19c)] + _0x20bed3(0x19b) + _0x3f9112[_0x20bed3(0x16a)][_0x20bed3(0x1a1)] + _0x20bed3(0x19f) + _0x3f9112[_0x20bed3(0x16a)][_0x20bed3(0x17b)] + _0x20bed3(0x15d) + _0x3f9112['body']['paypal_is_active'] + '\x27,\x20exchange_rate\x20=\x20\x27' + _0x3f9112[_0x20bed3(0x16a)][_0x20bed3(0x15f)] + _0x20bed3(0x1a7) + _0x3f9112[_0x20bed3(0x16a)]['paypal_client_id'] + _0x20bed3(0x188) + _0x3f9112['body'][_0x20bed3(0x170)] + '\x27'; con['query'](_0x48a54d, (_0x3a53cb, _0x19b111) => { const _0x5edf11 = _0x20bed3; if (_0x3a53cb) { _0x55b06a['json']({ 'msg': _0x5edf11(0x159), 'err': _0x3a53cb }), console[_0x5edf11(0x160)](_0x3a53cb); return; } else _0x55b06a['json']({ 'msg': _0x5edf11(0x18a), 'success': !![] }); }); }), router[_0x46c90f(0x175)]('/update_smtp', isvalid, (_0x523b85, _0x5367b4) => { const _0xb95167 = _0x46c90f; var _0x39fb28 = _0xb95167(0x190) + _0x523b85[_0xb95167(0x16a)]['smtp_host'] + _0xb95167(0x193) + _0x523b85[_0xb95167(0x16a)]['smtp_port'] + _0xb95167(0x16d) + _0x523b85[_0xb95167(0x16a)][_0xb95167(0x199)] + _0xb95167(0x184) + _0x523b85[_0xb95167(0x16a)][_0xb95167(0x15a)] + '\x27\x20'; con[_0xb95167(0x1a2)](_0x39fb28, (_0x2ebc91, _0x13a975) => { const _0x21a97d = _0xb95167; if (_0x2ebc91) { _0x5367b4[_0x21a97d(0x19e)]({ 'msg': _0x21a97d(0x159), 'err': _0x2ebc91 }), console['log'](_0x2ebc91); return; } else _0x5367b4[_0x21a97d(0x19e)]({ 'msg': _0x21a97d(0x18a), 'success': !![] }); }); }), router[_0x46c90f(0x175)](_0x46c90f(0x1a4), isvalid, (_0x82ca71, _0x588b2) => { const _0x4bd91c = _0x46c90f; if (_0x82ca71['files']) { if (_0x82ca71[_0x4bd91c(0x176)][_0x4bd91c(0x15b)] !== undefined) { const _0x5b759f = _0x82ca71[_0x4bd91c(0x176)][_0x4bd91c(0x15b)], _0x1659ee = ('' + Math[_0x4bd91c(0x177)]())[_0x4bd91c(0x1a6)](0x2, 0x7) + Date[_0x4bd91c(0x17a)]() + _0x5b759f['name']; _0x5b759f['mv'](__dirname + _0x4bd91c(0x185) + _0x1659ee, _0x480a14 => { const _0x2b6b4a = _0x4bd91c; if (_0x480a14) return console[_0x2b6b4a(0x160)](_0x480a14), _0x588b2['json']({ 'err': _0x480a14 }); }); var _0x825076 = _0x4bd91c(0x179) + _0x82ca71[_0x4bd91c(0x16a)]['app_name'] + _0x4bd91c(0x18f) + _0x82ca71[_0x4bd91c(0x16a)][_0x4bd91c(0x194)] + _0x4bd91c(0x19d) + _0x82ca71[_0x4bd91c(0x16a)][_0x4bd91c(0x169)] + '\x27,\x20logo\x20=\x20\x27' + _0x1659ee + '\x27\x20'; } } else var _0x825076 = _0x4bd91c(0x179) + _0x82ca71[_0x4bd91c(0x16a)][_0x4bd91c(0x17d)] + _0x4bd91c(0x18f) + _0x82ca71[_0x4bd91c(0x16a)][_0x4bd91c(0x194)] + '\x27,\x20theme_color\x20=\x20\x27' + _0x82ca71[_0x4bd91c(0x16a)]['theme_color'] + '\x27\x20'; con['query'](_0x825076, (_0x32003b, _0x256e83) => { const _0x1ac948 = _0x4bd91c; if (_0x32003b) { _0x588b2['json']({ 'msg': _0x1ac948(0x159), 'err': _0x32003b }), console[_0x1ac948(0x160)](_0x32003b); return; } else _0x588b2['json']({ 'msg': _0x1ac948(0x18a), 'success': !![] }); }); }), router['post']('/install_app', async (_0x31e30e, _0x161dca) => { const _0x2f09e3 = _0x46c90f, _0x2bb930 = _0x31e30e[_0x2f09e3(0x16a)]['app_name'], _0x4f434e = _0x31e30e['body']['currency_symbol'], _0x68070d = _0x31e30e[_0x2f09e3(0x16a)]['exchange_rate'], _0x48a3aa = _0x31e30e[_0x2f09e3(0x16a)]['admin_email'], _0x32dd29 = _0x31e30e[_0x2f09e3(0x16a)][_0x2f09e3(0x189)], _0xa643f7 = mysql['createPool']({ 'connectionLimit': 0x64, 'host': process[_0x2f09e3(0x186)][_0x2f09e3(0x18b)], 'port': process['env'][_0x2f09e3(0x178)], 'user': process[_0x2f09e3(0x186)][_0x2f09e3(0x165)], 'password': process[_0x2f09e3(0x186)][_0x2f09e3(0x15e)], 'database': process[_0x2f09e3(0x186)][_0x2f09e3(0x1a5)] }); _0xa643f7[_0x2f09e3(0x158)](_0x14b71b => { const _0x2bae8e = _0x2f09e3; if (_0x14b71b) { _0x161dca[_0x2bae8e(0x19e)]({ 'msg': _0x2bae8e(0x197) }); return; } else _0xa643f7[_0x2bae8e(0x1a2)](_0x2bae8e(0x16b) + process['env'][_0x2bae8e(0x1a5)], (_0x25e661, _0x13f7be) => { const _0x445a97 = _0x2bae8e; if (_0x25e661) return _0x161dca[_0x445a97(0x19e)]({ 'msg': _0x445a97(0x187) }); if (_0x13f7be[_0x445a97(0x162)] > 0x0) return _0x161dca[_0x445a97(0x19e)]({ 'msg': _0x445a97(0x1a3) }); else { const _0x1b09f0 = new Importer({ 'host': process[_0x445a97(0x186)][_0x445a97(0x18b)], 'user': process[_0x445a97(0x186)][_0x445a97(0x165)], 'password': process[_0x445a97(0x186)][_0x445a97(0x15e)], 'database': process['env']['DATABASE'] }); _0x1b09f0['import'](__dirname + '/../db/clean_whatsham.sql')[_0x445a97(0x16e)](async () => { const _0x564c83 = _0x445a97, _0x14738a = await bcrypt[_0x564c83(0x16f)](_0x32dd29, 0xa), _0x1b47ba = randomstring['generate']() + Date[_0x564c83(0x17a)](); _0xa643f7[_0x564c83(0x1a2)]('INSERT\x20INTO\x20admin\x20(email,\x20password,\x20role,\x20uid)\x20VALUES\x20(\x27' + _0x48a3aa + '\x27,\x27' + _0x14738a + _0x564c83(0x191) + _0x564c83(0x181) + _0x564c83(0x1a8) + _0x1b47ba + '\x27)', (_0x2f2dae, _0x43a6d1) => { const _0x57f727 = _0x564c83; if (_0x2f2dae) return _0x161dca[_0x57f727(0x19e)]({ 'msg': _0x57f727(0x157) }); else _0xa643f7[_0x57f727(0x1a2)](_0x57f727(0x16c) + _0x2bb930 + _0x57f727(0x1a8) + _0x4f434e + _0x57f727(0x1a8) + _0x68070d + _0x57f727(0x18d), (_0xda013, _0x246814) => { const _0x216096 = _0x57f727; if (_0xda013) return _0x161dca[_0x216096(0x19e)]({ 'msg': _0x216096(0x157) }); else _0x161dca[_0x216096(0x19e)]({ 'success': !![], 'msg': _0x216096(0x161) }); }); }); })[_0x445a97(0x164)](_0x7ca00a => { const _0x499ded = _0x445a97; console[_0x499ded(0x196)](_0x7ca00a); }); } }); }); }), router[_0x46c90f(0x182)]('/all_db', (_0xf5217f, _0x2f9cb9) => { const _0x280c70 = _0x46c90f; con[_0x280c70(0x1a2)]('SHOW\x20TABLES\x20FROM\x20u687661449_aaa', (_0x264138, _0xad1edd) => { const _0x306baf = _0x280c70; _0x2f9cb9[_0x306baf(0x19e)](_0xad1edd); }); }), module[_0x46c90f(0x1a9)] = router;